(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/merchant/shop_set"],{2920:function(t,e,o){"use strict";o.r(e);var n=o("794e"),s=o("cf10");for(var a in s)"default"!==a&&function(t){o.d(e,t,function(){return s[t]})}(a);o("615e");var i=o("2877"),r=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},3822:function(t,e,o){"use strict";(function(t){o("bc76"),o("921b");n(o("66fd"));var e=n(o("2920"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},"615e":function(t,e,o){"use strict";var n=o("ae97"),s=o.n(n);s.a},"794e":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.getImgSrc("shangjia/sj8.png")),n=t.getImgSrc("shangjia/sj8.png"),s=t.getImgSrc("shangjia/sj8.png"),a=t.getImgSrc("shangjia/sj8.png"),i=t.getImgSrc("shangjia/sj18.png"),r=t.getImgSrc("shangjia/sj8.png"),l=t.getImgSrc("shangjia/sj7.png"),c=t.getImgSrc("shangjia/sj18.png"),u=t.getImgSrc("shangjia/sj8.png"),d=t.getImgSrc("shangjia/sj8.png");t.$mp.data=Object.assign({},{$root:{m0:o,m1:n,m2:s,m3:a,m4:i,m5:r,m6:l,m7:c,m8:u,m9:d}})},s=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return s})},ae97:function(t,e,o){},c684:function(t,e,o){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;s(o("4966"));function s(t){return t&&t.__esModule?t:{default:t}}var a,i=function(){return Promise.all([o.e("common/vendor"),o.e("components/yq-avatar/yq-avatar")]).then(o.bind(null,"aae0"))},r=function(){return Promise.all([o.e("common/vendor"),o.e("components/Winglau14-lotusAddress/Winglau14-lotusAddress")]).then(o.bind(null,"7cf8"))},l={data:function(){var t=this.getDate({format:!0});return{upImg:"http://www.jfcma.com/public/images/jfcm/shangjia/up.png",storeId:0,storeInfo:{},time1:"",time2:"",currentDate:t,date1:"00:00",date2:"00:00",photoList:[],labelList:[],labelResult:"",labelStr:"",showLabelWindow:!1,typeList:[],typeIdList:[],showTypeWindow:!1,typeStr:"",lotusAddressData:{visible:!1,provinceName:"",cityName:"",townName:""},region:""}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},onLoad:function(e){a=this,void 0!=e.id&&(console.log(t(e.id," at pages\\merchant\\shop_set.vue:263")),a.storeId=e.id,a.getShopInfo());try{n.removeStorageSync("cashier_name")}catch(o){}},onShow:function(){try{var t=n.getStorageSync("cashier_name");t&&(a.storeInfo.usernickname=t)}catch(e){}},components:{avatar:i,"lotus-address":r},methods:{setDetailContent:function(){n.navigateTo({url:"shop_info?id="+a.storeId})},bindShouYing:function(){n.navigateTo({url:"bind_cashier?id="+a.storeId+"&name="+a.storeInfo.usernickname})},bindPhone:function(){n.navigateTo({url:"new_phone?id="+a.storeId+"&phone="+a.storeInfo.tel})},setBrandGoods:function(){n.navigateTo({url:"brand_goods?id="+a.storeId})},updateData:function(){a.lotusAddressData.provinceName=a.storeInfo.provinces,a.lotusAddressData.cityName=a.storeInfo.citys,a.lotusAddressData.townName=a.storeInfo.districts,a.region=a.storeInfo.provinces+" "+a.storeInfo.citys+" "+a.storeInfo.districts,a.time1=a.storeInfo.yingstarttime,a.time2=a.storeInfo.yingendtime,""!=a.time1.trim()&&(a.date1=a.time1),""!=a.time2.trim()&&(a.date2=a.time2),a.storeInfo.storeimg||(a.storeInfo.storeimg=[]),a.photoList=a.storeInfo.storeimg,""!=a.storeInfo.label&&(a.labelList=a.storeInfo.label.split(","))},openPicker:function(){this.lotusAddressData.visible=!0},choseValue:function(e){console.log(t(e," at pages\\merchant\\shop_set.vue:353")),this.lotusAddressData.visible=e.visible,e.isChose&&(this.lotusAddressData.provinceName=e.province,this.lotusAddressData.cityName=e.city,this.lotusAddressData.townName=e.town,this.region="".concat(e.province," ").concat(e.city," ").concat(e.town))},removePhoto:function(e){console.log(t(e," at pages\\merchant\\shop_set.vue:365")),a.photoList.length<=1?a.tipMsg("至少保留一张店面照片"):(a.photoList.splice(e,1),a.storeInfo.storeimg=a.photoList,console.log(t(a.photoList," at pages\\merchant\\shop_set.vue:373")))},myUpload:function(e){console.log(t(e," at pages\\merchant\\shop_set.vue:377")),a.storeInfo.logo=e.path,a.upLoadPhoto(0,e.path)},myUpload1:function(e){console.log(t(e," at pages\\merchant\\shop_set.vue:382")),a.upLoadPhoto(1,e.path)},upLoadPhoto:function(t,e){1==t&&a.photoList.length>=4?n.showToast({title:"照片数量上限",icon:"none"}):n.uploadFile({url:a.$httpUrl+"index.php/Api/Store/uploadImgFile",filePath:e,name:"image",formData:{names:"image",dirs:"shopSet"},success:function(e){var o=JSON.parse(e.data);if("1"==o.status){var s=o.result.result[0];1==t?(a.photoList.push(s),a.storeInfo.storeimg=a.photoList):a.storeInfo.logo=s}else n.showToast({icon:"none",title:o.msg})},fail:function(t){},complete:function(t){}})},addLabel:function(t){a.showLabelWindow=!a.showLabelWindow,1==t&&""!=a.labelStr.trim()&&(a.labelList.length<4?a.labelList.push(a.labelStr):n.showToast({title:"标签数量上限",icon:"none"})),a.labelResult=a.labelList.join(","),a.storeInfo.label=a.labelResult,a.labelStr=""},removeLabel:function(e){console.log(t(e," at pages\\merchant\\shop_set.vue:454")),a.labelList.splice(e,1),a.labelResult=a.labelList.join(","),console.log(t(a.labelResult," at pages\\merchant\\shop_set.vue:457")),console.log(t(a.labelList," at pages\\merchant\\shop_set.vue:458")),a.storeInfo.label=a.labelResult},saveNewInfo:function(){if(""!=a.storeInfo.storename.trim()){var e={storeid:a.storeInfo.id,street:a.storeInfo.street,provinces:a.storeInfo.provinces,citys:a.storeInfo.citys,districts:a.storeInfo.districts,avgmoney:1*a.storeInfo.avgmoney,cat_id:a.storeInfo.cat_id,keyword:a.storeInfo.keyword,label:a.storeInfo.label,logo:a.storeInfo.logo,storeimg:a.storeInfo.storeimg,storename:a.storeInfo.storename,yingendtime:a.storeInfo.yingendtime,yingstarttime:a.storeInfo.yingstarttime};console.log(t(e," at pages\\merchant\\shop_set.vue:485")),n.request({url:a.$httpUrl+"index.php/api/store/setstore",method:"POST",data:e,success:function(e){console.log(t(e," at pages\\merchant\\shop_set.vue:493")),1==e.data.status?n.showToast({icon:"none",title:"设置成功！"}):n.showToast({icon:"none",title:e.data.msg})},fail:function(t){},complete:function(t){}})}else a.tipMsg("店铺名称不能为空")},getShopInfo:function(){n.request({url:a.$httpUrl+"index.php/api/store/getstore",method:"POST",data:{storeid:a.storeId},success:function(e){console.log(t(e," at pages\\merchant\\shop_set.vue:527")),1==e.data.status?(a.storeInfo=e.data.result.storeinfo,a.updateData(),a.getTypeList()):n.showToast({icon:"none",title:e.data.msg})},fail:function(t){},complete:function(t){}})},typeChoiceChange:function(t){var e=t.detail.value;e.length>3?a.tipMsg("最多选择三个分类"):a.typeIdList=e},setTypeShow:function(t){a.showTypeWindow=!a.showTypeWindow,1==t&&a.splitTypeStr()},getTypeList:function(){n.request({url:a.$httpUrl+"index.php/Api/index/getcategory",method:"POST",success:function(t){if("1"==t.data.status&&0!=t.data.result.length){var e=t.data.result;a.typeList=e,a.typeIdList=a.storeInfo.cat_id.split(","),a.splitTypeStr()}},fail:function(t){},complete:function(t){}})},splitTypeStr:function(t){for(var e=a.typeIdList,o=a.typeList,n="",s=e.join(","),i=0;i<o.length;i++)o[i].check=!1;for(var r=0;r<e.length;r++)for(var l=0;l<o.length;l++)e[r]==o[l].id&&(o[l].check=!0,n=n+" "+o[l].name);a.typeStr=n,a.storeInfo.cat_id=s},bindDateChange:function(t){a.date1=t.target.value,a.time1=t.target.value,a.storeInfo.yingstarttime=t.target.value},bindDateChange2:function(t){a.date2=t.target.value,a.time2=t.target.value,a.storeInfo.yingendtime=t.target.value},getDate:function(t){var e=new Date,o=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return"start"===t?o-=20:"end"===t&&(o+=5),n=n>9?n:"0"+n,s=s>9?s:"0"+s,"".concat(o,"-").concat(n,"-").concat(s)}}};e.default=l}).call(this,o("0de9")["default"],o("6e42")["default"])},cf10:function(t,e,o){"use strict";o.r(e);var n=o("c684"),s=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=s.a}},[["3822","common/runtime","common/vendor"]]]);