(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/merchant/apply_join"],{2400:function(e,t,o){"use strict";o.r(t);var n=o("3922"),a=o("6078");for(var s in a)"default"!==s&&function(e){o.d(t,e,function(){return a[e]})}(s);o("5515");var i=o("2877"),c=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=c.exports},3922:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=(e._self._c,e.getImgSrc("back/back2.png")),n=e.getImgSrc("shangjia/sj25.png"),a=e.getImgSrc("shangjia/sj25.png"),s=e.getImgSrc("shangjia/sj25.png"),i=e.getImgSrc("shangjia/sj2.png"),c=e.getImgSrc("shangjia/sj2.png");e.$mp.data=Object.assign({},{$root:{m0:o,m1:n,m2:a,m3:s,m4:i,m5:c}})},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},5515:function(e,t,o){"use strict";var n=o("796c"),a=o.n(n);a.a},6078:function(e,t,o){"use strict";o.r(t);var n=o("6eca"),a=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);t["default"]=a.a},"6eca":function(e,t,o){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s,i=function(){return Promise.all([o.e("common/vendor"),o.e("components/yq-avatar/yq-avatar")]).then(o.bind(null,"aae0"))},c=function(){return Promise.all([o.e("common/vendor"),o.e("components/Winglau14-lotusAddress/Winglau14-lotusAddress")]).then(o.bind(null,"7cf8"))},r={data:function(){return{canGet:!0,time1:60,loginInfo:{},lotusAddressData:{visible:!1,provinceName:"",cityName:"",townName:""},region:"",logoImg:"",sfzImg1:"",sfzImg2:"",licenseImg:"",shopImg:"",name:"",user:"",address:"",phone:"",code:"",typeList:[],typeIdList:[],showTypeWindow:!1,typeStr:"",cat_id_str:""}},onLoad:function(){a=this,this.getTypeList(),e.getLocation({type:"wgs84",geocode:!0,success:function(e){a.getCurrentSite(e.longitude,e.latitude)},fail:function(){}})},onShow:function(){var e=this.checkLogin("../index/index","2");if(!e)return!1;this.loginInfo=e},components:{"lotus-address":c,avatar:i},methods:{goPage:function(t){0==t?e.navigateTo({url:"/pages/personal/user_guide"}):e.navigateTo({url:"/pages/personal/privacy_policy"})},getCurrentSite:function(t,o){e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=json&location="+t+","+o+"&key=f37d49f85f46c59af0ee84115b6c1f3c&radius=0&extensions=all",method:"POST",success:function(e){"OK"==e.data.info&&(a.lotusAddressData.provinceName=e.data.regeocode.addressComponent.province,a.lotusAddressData.townName=e.data.regeocode.addressComponent.district,a.lotusAddressData.cityName=e.data.regeocode.addressComponent.city,a.lotusAddressData.cityName instanceof Array&&(a.lotusAddressData.cityName=e.data.regeocode.addressComponent.district,a.lotusAddressData.townName=""))},fail:function(e){},complete:function(e){}})},coverTop:function(e){console.log(n(e," at pages\\merchant\\apply_join.vue:270"))},myUpload:function(e){a.logoImg=e.path,a.upImgToServer(0,e.path)},myUpload1:function(e){a.sfzImg1=e.path,a.upImgToServer(1,e.path)},myUpload2:function(e){a.sfzImg2=e.path,a.upImgToServer(2,e.path)},myUpload3:function(e){a.licenseImg=e.path,a.upImgToServer(3,e.path)},myUpload4:function(e){a.shopImg=e.path,a.upImgToServer(4,e.path)},getCodeOne:function(){var t=a.phone;a.checkPhone(t)&&e.request({url:a.$httpUrl+"index.php/api/store/sendcodemess",method:"POST",data:{mobile:t,scene:12},success:function(t){"1"==t.data.status&&(a.canGet=!1,a.timeDown()),e.showToast({title:t.data.msg,icon:"none"})},fail:function(e){},complete:function(e){}})},timeDown:function(){clearInterval(s),a.time1=60,s=setInterval(function(){a.time1=a.time1-1,a.time1<1&&(clearInterval(s),a.canGet=!0,a.time1=60)},1e3)},openPicker:function(){this.lotusAddressData.visible=!0},choseValue:function(e){console.log(n(e," at pages\\merchant\\apply_join.vue:356")),this.lotusAddressData.visible=e.visible,e.isChose&&(this.lotusAddressData.provinceName=e.province,this.lotusAddressData.cityName=e.city,this.lotusAddressData.townName=e.town,this.region="".concat(e.province," ").concat(e.city," ").concat(e.town))},dataInit:function(){a.name="",a.code="",a.address="",clearInterval(s),a.canGet=!0,a.time1=60,a.licenseImg="",a.shopImg="",a.logoImg=""},applyJoin:function(){var t={code:a.code,provinces:a.lotusAddressData.provinceName,citys:a.lotusAddressData.cityName,districts:a.lotusAddressData.townName,certificateimg:a.sfzImg1,certificateimg1:a.sfzImg2,licenseimg:a.licenseImg,storeimg:a.shopImg,storelogo:a.logoImg,mobile:a.phone,storeaddress:a.address,storename:a.name,username:a.user,cat_id:a.cat_id_str,user_id:a.loginInfo.uid};console.log(n(t," at pages\\merchant\\apply_join.vue:399")),""!=t.storelogo.trim()?""!=t.storename.trim()?""!=t.provinces.trim()?""!=t.storeaddress.trim()?""!=t.cat_id.trim()?""!=t.username.trim()?a.checkPhone(t.mobile)?""!=t.code.trim()?""!=t.certificateimg.trim()&&""!=t.certificateimg1.trim()?""!=t.storeimg.trim()?""!=t.licenseimg.trim()?e.request({url:a.$httpUrl+"index.php/Api/store/addUserstore",method:"POST",data:t,success:function(t){console.log(n(t," at pages\\merchant\\apply_join.vue:463")),1==t.data.status&&(a.dataInit(),setTimeout(function(){e.navigateTo({url:"audit_info"})},1500)),e.showToast({title:t.data.msg,icon:"none"})},fail:function(e){},complete:function(e){}}):a.tipMsg("请上传营业执照"):a.tipMsg("请上传店面照片"):a.tipMsg("请上传身份证"):a.tipMsg("请填写验证码"):a.tipMsg("手机号格式不正确"):a.tipMsg("请填写联系人"):a.tipMsg("请选择店铺类别"):a.tipMsg("请填写店铺地址"):a.tipMsg("请选择地区"):a.tipMsg("请填写店铺名称"):a.tipMsg("请上传店铺LOGO")},uploadImg:function(t){e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){console.log(n(e.tempFiles," at pages\\merchant\\apply_join.vue:496"));var o=e.tempFiles[0].path;a.upImgToServer(t,o)}})},upImgToServer:function(t,o){e.uploadFile({url:a.$httpUrl+"index.php/Api/Store/uploadImgFile",filePath:o,name:"image",formData:{names:"image",dirs:"shopAdd"},success:function(o){var s=JSON.parse(o.data);if(console.log(n(s," at pages\\merchant\\apply_join.vue:519")),"1"==s.status){var i=s.result.result[0];0==t?a.logoImg=i:1==t?a.sfzImg1=i:2==t?a.sfzImg2=i:3==t?a.licenseImg=i:4==t&&(a.shopImg=i)}else e.showToast({icon:"none",title:s.msg})},fail:function(e){},complete:function(e){}})},typeChoiceChange:function(e){var t=e.detail.value;t.length>3?a.tipMsg("最多选择三个分类"):a.typeIdList=t},setTypeShow:function(e){a.showTypeWindow=!a.showTypeWindow,1==e&&a.splitTypeStr()},getTypeList:function(){e.request({url:a.$httpUrl+"index.php/Api/index/getcategory",method:"POST",success:function(e){if("1"==e.data.status&&0!=e.data.result.length){var t=e.data.result;a.typeList=t}},fail:function(e){},complete:function(e){}})},splitTypeStr:function(e){for(var t=a.typeIdList,o=a.typeList,n="",s=t.join(","),i=0;i<o.length;i++)o[i].check=!1;for(var c=0;c<t.length;c++)for(var r=0;r<o.length;r++)t[c]==o[r].id&&(o[r].check=!0,n=n+" "+o[r].name);a.typeStr=n,a.cat_id_str=s},backBeforePage:function(){e.navigateBack({delta:1})}}};t.default=r}).call(this,o("6e42")["default"],o("0de9")["default"])},"796c":function(e,t,o){},fc2a:function(e,t,o){"use strict";(function(e){o("bc76"),o("921b");n(o("66fd"));var t=n(o("2400"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])}},[["fc2a","common/runtime","common/vendor"]]]);