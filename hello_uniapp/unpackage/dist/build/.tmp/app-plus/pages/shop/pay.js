(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/pay"],{"1f1f":function(e,o,t){"use strict";t.r(o);var a=t("9ede"),n=t.n(a);for(var s in a)"default"!==s&&function(e){t.d(o,e,function(){return a[e]})}(s);o["default"]=n.a},"75b7":function(e,o,t){"use strict";t.r(o);var a=t("f9cf"),n=t("1f1f");for(var s in n)"default"!==s&&function(e){t.d(o,e,function(){return n[e]})}(s);t("a383b");var i=t("2877"),r=Object(i["a"])(n["default"],a["a"],a["b"],!1,null,null,null);o["default"]=r.exports},"77cb":function(e,o,t){},"7f1a":function(e,o,t){"use strict";(function(e){t("bc76"),t("921b");a(t("66fd"));var o=a(t("75b7"));function a(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("6e42")["createPage"])},"9ede":function(e,o,t){"use strict";(function(e,t){var a;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n={data:function(){return{dataInfo:{},loginInfo:{},orderInfo:{},payMoney:"",showPayBlock:!1,payId:0,storeInfo:{},couponId:0,storeId:0,payMethod:"wxpay",pay_type:"wxPay"}},onLoad:function(o){a=this;var t=this.checkLogin("../index/index","2");if(!t)return!1;this.loginInfo=t,void 0!=o.id&&void 0!=o.storeInfo&&void 0!=o.sid&&(a.couponId=o.id,a.storeInfo=JSON.parse(o.storeInfo),a.storeId=o.sid,console.log(e(a.couponId," at pages\\shop\\pay.vue:132")),console.log(e(a.storeInfo," at pages\\shop\\pay.vue:133")),console.log(e(a.storeId," at pages\\shop\\pay.vue:134")),this.useCoupon())},methods:{wxappPay:function(o){var n=o.data.result.result;console.log(e(n," at pages\\shop\\pay.vue:144")),console.log(e("***************"," at pages\\shop\\pay.vue:145")),t.requestPayment({timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:"MD5",paySign:n.paySign,success:function(e){t.redirectTo({url:"/pages/shop/evaluate?id="+a.storeId})},fail:function(o){console.log(e("fail:"+JSON.stringify(o)," at pages\\shop\\pay.vue:158"))}})},zeroPay:function(){t.request({url:a.$httpUrl+"index.php/api/index/orderpay",method:"POST",data:{user_id:a.loginInfo.uid,order_sn:a.orderInfo.order_sn},success:function(o){console.log(e("为零支付是：",o," at pages\\shop\\pay.vue:173")),1==o.data.status?t.redirectTo({url:"/pages/shop/evaluate?id="+a.storeId}):t.showToast({icon:"none",title:o.data.msg})},fail:function(e){},complete:function(e){}})},confirmPay:function(o){if(0!=a.orderInfo.order_money){var n={user_id:a.loginInfo.uid,order_sn:a.orderInfo.order_sn,pay_code:a.pay_type,type:"1",openid:a.loginInfo.openid};t.request({url:a.$httpUrl+"index.php/api/recommend/orderPaying",method:"POST",data:n,success:function(o){if(console.log(e(o," at pages\\shop\\pay.vue:222")),-1!=o.data.status)if("wxpay"==a.payMethod){var n=o.data.result.result,s=JSON.stringify({appid:n.appid,noncestr:n.nonce_str,package:n.package,partnerid:n.partnerid,prepayid:n.prepay_id,sign:n.sign,timestamp:n.time});console.log(e(s," at pages\\shop\\pay.vue:246")),console.log(e("***************"," at pages\\shop\\pay.vue:247")),t.requestPayment({provider:a.payMethod,orderInfo:s,success:function(e){t.redirectTo({url:"/pages/shop/evaluate?id="+a.storeId})},fail:function(o){console.log(e("fail:"+JSON.stringify(o)," at pages\\shop\\pay.vue:257"))}})}else"alipay"==a.payMethod&&t.requestPayment({provider:a.payMethod,orderInfo:o.data.data,success:function(e){t.redirectTo({url:"/pages/shop/evaluate?id="+a.storeId})},fail:function(e){}});else t.showToast({title:o.data.msg,icon:""})},fail:function(e){},complete:function(e){}})}else a.zeroPay()},cancelPay:function(e){a.showPayBlock=!1},payAlert:function(){""!=a.payMoney.trim()?t.request({url:a.$httpUrl+"index.php/api/index/beforeorder",method:"POST",data:{coupon_id:a.couponId,user_id:a.loginInfo.uid,storeid:a.storeId,total_amount:1*a.payMoney},success:function(o){console.log(e(o," at pages\\shop\\pay.vue:315")),1==o.data.status?(a.orderInfo=o.data.result.result,a.showPayBlock=!0):t.showToast({icon:"none",title:o.data.msg})},fail:function(e){},complete:function(e){}}):a.tipMsg("请输入正确的支付金额")},useCoupon:function(){t.request({url:a.$httpUrl+"index.php/api/index/usecoupon",method:"POST",data:{coupon_id:a.couponId,user_id:a.loginInfo.uid,storeid:a.storeId},success:function(o){console.log(e(o," at pages\\shop\\pay.vue:350")),1==o.data.status?a.dataInfo=o.data.result:t.showToast({icon:"none",title:o.data.msg})},fail:function(e){},complete:function(e){}})},changePayId:function(e){a.payId=e,0==e?(a.payMethod="wxpay",a.pay_type="wxPay"):1==e&&(a.payMethod="alipay",a.pay_type="aliPay")}}};o.default=n}).call(this,t("0de9")["default"],t("6e42")["default"])},a383b:function(e,o,t){"use strict";var a=t("77cb"),n=t.n(a);n.a},f9cf:function(e,o,t){"use strict";var a=function(){var e=this,o=e.$createElement,t=(e._self._c,e.getImgSrc("home/home24.png")),a=e.getImgSrc("home/home17.png");e.$mp.data=Object.assign({},{$root:{m0:t,m1:a}})},n=[];t.d(o,"a",function(){return a}),t.d(o,"b",function(){return n})}},[["7f1a","common/runtime","common/vendor"]]]);