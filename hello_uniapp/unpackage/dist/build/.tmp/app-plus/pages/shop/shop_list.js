(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/shop_list"],{"0120":function(e,t,n){},"3a4c":function(e,t,n){"use strict";(function(e){n("bc76"),n("921b");a(n("66fd"));var t=a(n("7bf9"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"4ee8":function(e,t,n){"use strict";var a=n("0120"),r=n.n(a);r.a},"7bf9":function(e,t,n){"use strict";n.r(t);var a=n("d1cf"),r=n("9146");for(var l in r)"default"!==l&&function(e){n.d(t,e,function(){return r[e]})}(l);n("4ee8");var o=n("2877"),i=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,null,null);t["default"]=i.exports},9146:function(e,t,n){"use strict";n.r(t);var a=n("d7a1"),r=n.n(a);for(var l in a)"default"!==l&&function(e){n.d(t,e,function(){return a[e]})}(l);t["default"]=r.a},d1cf:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.getImgSrc("back/back1.png")),a=e.getImgSrc("home/home5.png"),r=e.getImgSrc("home/home4.png"),l=e.__map(e.shopList,function(t,n){var a=Math.round(t.distance/100);return{$orig:e.__get_orig(t),g0:a}});e.$mp.data=Object.assign({},{$root:{m0:n,m1:a,m2:r,l0:l}})},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},d7a1:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("c855"));function r(e){return e&&e.__esModule?e:{default:e}}var l,o=a.default.cityArr,i=!1,u="",c={data:function(){return{listIsFree:!1,longitude:113,latitude:23,searchWord:"",city_name:"",typeList:[],shopList:[],currentPage:1,totalPage:1,isLast:!0,toolArray:[{name:"分类",id:"0",list:[]},{name:"附近",id:"1",list:[{name:"不限",val:"-1"},{name:"500m",val:"1"},{name:"1000m",val:"2"},{name:"2000m",val:"3"},{name:"5000m",val:"4"}]},{name:"区域",id:"2",list:[]},{name:"排序",id:"3",list:[{name:"默认",val:"-1"},{name:"分润高优先",val:"1"},{name:"距离近优先",val:"2"},{name:"好评高优先",val:"3"},{name:"人均低优先",val:"4"},{name:"人均高优先",val:"5"}]},{name:"筛选",id:"4",list:[{name:"红包",val:"1"},{name:"满减",val:"2"},{name:"闲置",val:"3"},{name:"价格区间20-50",val:"4"},{name:"价格区间50-100",val:"5"},{name:"价格区间100以上",val:"6"}]}],atIndex:null,currentIndex1:-1,currentIndex2:-1,currentIndex3:-1,currentIndex4:-1,currentIndex5:-1,type1:null,type2:null,type3:null,type4:null,type5:null}},onLoad:function(e){if(l=this,this.beginOnload(),this.shopList=[],void 0!=e.item){var t=JSON.parse(e.item);u=t.city,l.city_name=e.city,l.latitude=t.latitude,l.longitude=t.longitude,l.updateCityArea(),l.changeType(1*t.index,0,t.id,t.name)}else l.loadShopList(1)},onPullDownRefresh:function(){l=this,setTimeout(function(){e.stopPullDownRefresh(),l.searchWord="",l.atIndex=null,l.searchShop()},1e3)},onReachBottom:function(){this.nextPage()},methods:{goDetail:function(t){e.navigateTo({url:"/pages/shop/shop_detail?id="+t})},backBeforePage:function(){e.navigateBack({delta:1})},initProp:function(e){i=!1,l.currentPage=1,l.isLast=!0,l.shopList=[],e&&(l.currentIndex1=-1,l.currentIndex2=-1,l.currentIndex3=-1,l.currentIndex4=-1,l.currentIndex5=-1,l.type1=null,l.type2=null,l.type3=null,l.type4=null,l.type5=null,l.toolArray[0].name="分类",l.toolArray[1].name="附近",l.toolArray[2].name="区域",l.toolArray[3].name="排序",l.toolArray[4].name="筛选")},searchShop:function(){l.initProp(!0),l.loadShopList(1,l.searchWord)},loadShopList:function(t,n,a,r,o,u,c){var s=t,d={limit:10,page:s,lat:l.latitude,lng:l.longitude};void 0!=n&&""!=n.trim()&&(d.keyword=n),void 0!=a&&null!=a&&-1!=a&&(d.cat_id=a),void 0!=r&&null!=r&&-1!=r&&(d.distance=r),void 0!=o&&null!=o&&"-1"!=o&&(d.districts=o),void 0!=u&&null!=u&&-1!=u&&(d.sort=u),void 0!=c&&null!=c&&-1!=c&&(d.type=c),e.request({url:l.$httpUrl+"index.php/api/index/getstoremess",method:"POST",data:d,success:function(e){var t=e.data.result;"1"==e.data.status&&0!=e.data.result.data.length&&(l.isLast=s>=t.last_page,l.currentPage=s,l.shopList=l.shopList.concat(e.data.result.data)),l.shopList.length<=0?l.listIsFree=!0:l.listIsFree=!1},fail:function(e){},complete:function(e){i=!1}})},nextPage:function(){if(l.isLast)e.showToast({title:"没有更多了",icon:"none"});else if(!i){i=!0;var t=l.currentPage+1;l.loadShopList(t,l.searchWord,l.type1,l.type2,l.type3,l.type4,l.type5)}},updateCityArea:function(){if(null!=o){for(var e=u.replace("市",""),t=[],n=0;n<o.length;n++){if(t.length>0)break;for(var a=0;a<o[n].city.length;a++)if(-1!=o[n].city[a].name.indexOf(e)){t=o[n].city[a].area;break}}setTimeout(function(){l.updateArea(t)},200)}},updateArea:function(e){for(var t=[{name:"不限",val:"-1"}],n=0;n<e.length;n++){var a={name:e[n],val:e[n]};t.push(a)}l.currentIndex3=-1,l.type3=null,l.toolArray[2].list=t},changeType:function(e,t,n,a){switch(t){case 0:l.currentIndex1=e,l.type1=1*n,l.toolArray[0].name=a;break;case 1:l.currentIndex2=e,l.type2=1*n,l.toolArray[1].name=a;break;case 2:l.currentIndex3=e,l.type3=n,l.toolArray[2].name=a;break;case 3:l.currentIndex4=e,l.type4=1*n,l.toolArray[3].name=a;break;case 4:l.currentIndex5=e,l.type5=1*n,l.toolArray[4].name=a;break}l.atIndex=null,l.initProp(!1),l.loadShopList(1,l.searchWord,l.type1,l.type2,l.type3,l.type4,l.type5)},changeToolList:function(e){e===l.atIndex?l.atIndex=null:l.atIndex=e},beginOnload:function(){e.request({url:l.$httpUrl+"index.php/Api/index/getcategory",method:"POST",success:function(e){if("1"==e.data.status&&0!=e.data.result.length){var t=e.data.result;l.typeList=t;for(var n=[],a=0;a<t.length;a++){var r={name:t[a].name,val:t[a].id+""};n.push(r)}l.toolArray[0].list=n}},fail:function(e){},complete:function(e){}})}}};t.default=c}).call(this,n("6e42")["default"])}},[["3a4c","common/runtime","common/vendor"]]]);